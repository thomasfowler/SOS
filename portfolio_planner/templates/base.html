{% extends 'bootstrap.html' %}

{% load static %}
{% load django_bootstrap5 %}

{% block bootstrap5_content %}
    <div class="container">
        <header>
            <h1>{% block title %}(no title){% endblock %}</h1>
            <ul class="nav nav-pills nav-fill">
                {% if user.is_authenticated %}
                    <li class="nav-item"><a class="nav-link {% if current_path == '/' or current_path == '/home/' %}active{% endif %}" href="{% url 'home' %}">Home</a></li>
                    <li class="nav-item"><a class="nav-link {% if current_path == '/dashboard/' %}active{% endif %}" href="{% url 'dashboard' %}">Dashboard</a></li>
                    <li class="nav-item"><a class="nav-link {% if current_path == '/portfolio-planner/' %}active{% endif %}" href="{% url 'portfolio_planner' %}">Portfolio Planner</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'logout' %}">Logout</a></li>
                {% endif %}
            </ul>
        </header>

        <div class="row">
            <div class="col-9">
                <main>
                    {% autoescape off %}{% bootstrap_messages %}{% endautoescape %}
                    {% block content %}(no content){% endblock %}
                </main>
            </div>

            <div class="col-3 mt-2">
                <aside>
                    {% if user.is_authenticated %}
                        {% block sidebar %}
                            <!-- Default Sidebar Content -->
                            <h4>Quick Links</h4>
                            <ul class="list-group">
                                <li class="list-group-item"><i class="bi bi-plus-circle"></i> <a href="#">New Opportunity</a></li>
                                <li class="list-group-item"><i class="bi bi-briefcase"></i> <a href="#">My Opportunities</a></li>
                                <li class="list-group-item"><i class="bi bi-clock"></i> <a href="#">Pending Approvals</a></li>
                            </ul>

                            <h4>Summary Stats</h4>
                            <ul>
                                <!-- TODO: Placeholder for stats -->
                                <li>Total Revenue: $XXXX</li>
                                <li>Deals Closed: XX</li>
                                <li>Avg Deal Size: $XXXX</li>
                            </ul>
                        {% endblock %}
                    {% endif %}
                </aside>
            </div>
        </div>

        <footer class="mt-5">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-3 text-center">
                        <img src="{% static 'images/primary_circle_sos_logo_250.png' %}" alt="Science of Sales Logo" id="footer-logo">
                    </div>
                    <div class="col-9 text-center">
                        <!-- Copyright -->
                        {% now "Y" as current_year %}
                        <p>&copy; {{ current_year }} Science of Sales (Pty) Ltd. All Rights Reserved.</p>
                    </div>
                </div>
            </div>
        </footer>

    </div>
{% endblock %}
